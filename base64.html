<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>base64</title>
</head>

<body>

</body>
<script>


var str = 'Man is distinguished, not only by his reason, but by this singular passion from other animals, which is a lust of the mind, that by a perseverance of delight in the continued and indefatigable generation of knowledge, exceeds the short vehemence of any carnal pleasure.'

function encodeBase64(str) {
    var change = 0
    var bin = str.replace(/./g, toBinary)
    if (bin.length / 8 % 3 == 1) {
        bin = bin + '0000000000000000'
        change = 2
    }
    if (bin.length / 8 % 3 == 2) {
        bin = bin + '00000000'
        change = 1
    }
    result = bin.replace(/.{6}/g, toBase64)
    if (change == 1) {
        return result.replace(/.$/, '=')
    }
    if (change == 2) {
        return result.replace(/..$/, '==')
    }
    return result

    function toBinary(match) {
        var b = match.charCodeAt(0).toString(2)
        if (b.length < 8) {
            var len = b.length
            for (var i = 0; i < 8 - len; i++) {
                b = '0' + b
            }
        }
        return b
    }

    function toBase64(match) {
        var baseCode = parseInt(match, 2)
        if (baseCode >= 0 && baseCode <= 25) {
            return String.fromCharCode(baseCode + 65)
        } else if (baseCode <= 51) {
            return String.fromCharCode(baseCode + 71)
        } else if (baseCode <= 61) {
            return String.fromCharCode(baseCode - 4)
        } else if (baseCode == 62) {
            return '+'
        } else if (baseCode == 63) {
            return '/'
        }
    }
}
</script>

</html>
